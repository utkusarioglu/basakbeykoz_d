@import '../../common/styles/_vars';
@import '../../common/styles/_mixins';
@import './_wpPosts';
$navSocialSpaceX: getComponentProperty(nav, socialSpace_x_px);
$minBlockHeight: getComponentProperty(home, sectionHeight_min_px);
$minMobileBlockGroupHeight: #{unquote(
    'max(calc(100vh - #{$GAP*2} - #{getComponentProperty(nav, mobileHeight_px)}), #{$minBlockHeight})'
  )};
$minNarrowBlockGroupHeight: #{unquote(
    'max(calc(100vh - #{$GAP*2}), #{$minBlockHeight})'
  )};
$standardGroupInnerblockPadding: 100px;
.Canvas {
  &.page {
    &.home {
      padding-bottom: 0;
      @include viewport(w, SVGA) {
        display: block;
        .Canvas-articleTitle {
          display: none;
        }
      }
      & .Canvas-decor {
        display: none;
      }
      & > article {
        padding: 0;
        & > .wp-block-group {
          box-sizing: border-box;
          padding: #{$GAP};
          min-height: #{$minMobileBlockGroupHeight};
          overflow: hidden;
          position: relative;
          @include viewport(w, XGAplus) {
            height: 100vh;
          }
          & > .wp-block-group__inner-container {
            min-height: #{$minMobileBlockGroupHeight};
            height: 100%;
            display: grid;
            box-sizing: border-box;
            padding-bottom: #{getComponentProperty(nav, mobileHeight_px)};
            @include viewport(w, XGAplus) {
              padding-bottom: 0;
            }
            & > p {
              margin-bottom: 0;
            }
            & > h2 + .wp-block-group {
              grid-area: paragraph;
            }
          }
          &:first-child {
            $logoNSocial_y_px: getComponentProperty(logoNSocial, y_px);
            $home_welcomeImage_x_vw: getComponentProperty(
              home,
              welcomeImage_x_vw
            );

            background-color: transparent;
            padding-top: #{$GAP/2};
            @include viewport(h, SVGA) {
              padding-top: #{$GAP};
            }
            & > .wp-block-group__inner-container {
              $figureDent: $logoNSocial_y_px + 4 * $GAP;
              grid-template-areas:
                'logo'
                'cover'
                'h1'
                'paragraph';
              grid-template-rows: #{$logoNSocial_y_px} 1fr min-content min-content;
              grid-row-gap: #{$GAP/2};
              @include viewport(h, HD) {
                grid-row-gap: #{$GAP};
              }
              @include viewport(w, SVGA) {
                grid-template-areas:
                  '. logo         .'
                  '. h1   .'
                  '. paragraph    .'
                  '. buttons      .';
                grid-template-columns: #{$home_welcomeImage_x_vw} 1fr;
                grid-template-rows: #{$logoNSocial_y_px} 1fr 1fr #{$logoNSocial_y_px};
                grid-row-gap: #{$GAP};
                height: 100%;
              }
              @include viewport(w, XGAplus) {
                $navSocialSpaceX: getComponentProperty(nav, socialSpace_x_px);
                grid-template-columns: #{$home_welcomeImage_x_vw} 1fr #{$navSocialSpaceX};
                grid-column-gap: #{responsive(
                    0,
                    70,
                    map-get(map-get($VIEWPORT, width), XGAplus),
                    1920
                  )};
              }
              .wp-block-cover {
                margin-left: #{-$GAP};
                margin-right: #{-$GAP};
                background-size: cover;
                @include viewport(w, SVGA) {
                  position: absolute;
                  margin-left: 0;
                  margin-right: 0;
                  top: #{-$GAP};
                  left: #{-$GAP};
                  right: #{-$GAP};
                  z-index: -1;
                  right: auto;
                  bottom: #{-$GAP};
                  width: $home_welcomeImage_x_vw;
                  height: auto;
                  z-index: 91;
                }
              }
            }
            figure {
              margin: 0;
              grid-area: logo;
              width: 100%;
              height: 100%;
              justify-items: center;
              align-items: center;
              display: grid;
              @include viewport(w, SVGA) {
                justify-self: start;
                justify-content: start;
              }
              & > img {
                width: auto;
                min-width: 100px;
                max-width: 100%;
                height: 100%;
                max-height: 50px;
                object-fit: scale-down;
              }
            }
            h1 {
              @include heroFont();
              margin-left: #{-$GAP/2};
              margin-right: #{-$GAP/2};
              align-self: end;
              justify-self: center;
              color: #{getColor(text-mediumDark)};
              @include viewport(w, SVGA) {
                justify-self: start;
                margin-left: 0;
                margin-right: 0;
              }
            }
            .wp-block-buttons {
              display: none;
              grid-area: buttons;
              width: 100%;
              margin-right: #{$GAP/2};
              margin-left: #{-$GAP/2};
              .wp-block-button {
                @include buttonText();
                background-color: #{getColor(ui-yellow)};
                color: #{getColor(text-dark)};
                padding: #{$GAP/2};
                border-radius: #{$GAP/2};
                width: 100%;
                &:hover {
                  background-color: #{getColor(ui-darkBlue)};
                  color: #{getColor(text-light)};
                  cursor: pointer;
                }
              }
              @include viewport(w, SVGA) {
                display: block;
              }
            }
          }
          &:not(:first-child) {
            & > .wp-block-group__inner-container {
              @include viewport(w, SVGA) {
                align-content: center;
                grid-row-gap: #{$GAP};
                grid-column-gap: #{2 * $GAP};
              }
              @include viewport(w, XGAplus) {
                $wideScreenSize: map-get(map-get($VIEWPORT, width), XGAplus);
                $maxPadding: 350;
                $padding: responsive(144, $maxPadding, $wideScreenSize);
                grid-column-gap: #{responsive(
                    2 * ($GAP)/1px,
                    100,
                    $wideScreenSize,
                    1920
                  )};
                padding-left: #{$padding};
                padding-right: #{$padding};
              }
            }

            h2 {
              text-align: center;
            }
            .wp-block-cover {
              display: block;
              grid-area: image;
              height: 100%;
              width: 100%;
              background-position: center;
              background-repeat: no-repeat;
              background-size: cover;
              position: relative;
              border-radius: #{$GAP/2};
              @mixin frame-common {
                content: '';
                position: absolute;
              }
              $narrow-frame: calc(100% - #{$GAP});
              $wide-frame: calc(100% + #{$GAP});
              $extrude: calc(#{$GAP} / 2 * -1);
              $bevel: calc(#{$GAP} / 2);
              &:before {
                @include frame-common;
                width: $wide-frame;
                height: $narrow-frame;
                top: $bevel;
                left: $extrude;
                border-radius: #{$GAP/2};
              }
              &:after {
                @include frame-common;
                width: $narrow-frame;
                height: $wide-frame;
                top: $extrude;
                left: $bevel;
                border-radius: #{$GAP/2};
              }
            }
          }
          &:nth-child(2) {
            & > .wp-block-group__inner-container {
              grid-template-areas:
                'h2'
                'image'
                'paragraph';
              grid-template-rows: max-content auto min-content;
              grid-row-gap: #{$GAP};
              padding-top: 20px;
              @include viewport(h, HD) {
                grid-row-gap: #{2 * $GAP};
              }
              @include viewport(w, SVGA) {
                grid-template-areas:
                  'h2 image'
                  'paragraph image';
                padding-top: #{$standardGroupInnerblockPadding};
                padding-bottom: #{$standardGroupInnerblockPadding};
                grid-template-columns: 2fr 1fr;
                grid-template-rows: max-content 200px;
              }
              @include viewport(w, XGAplus) {
                grid-row-gap: 5vw;
              }
              h2 {
                position: relative;
                width: max-content;
                justify-self: center;
                @include viewport(w, SVGA) {
                  justify-self: start;
                  text-align: left;
                }
                // &:before {
                //   $h2fontSize: map-get(map-get($HEADINGS, h2), line-height);
                //   $parrotSize: 60px;
                //   @include svgArt('parrot.svg', $parrotSize, $parrotSize);
                //   bottom: auto;
                //   left: -20px;
                //   top: calc(-1 * #{$h2fontSize});
                //   transform: none;
                //   width: #{$parrotSize};
                // }
              }
            }
          }
          &:nth-child(3) {
            & > .wp-block-group__inner-container {
              grid-template-areas:
                'h2'
                'image'
                'paragraph'
                'restart';
              grid-template-rows: max-content auto min-content min-content;
              grid-row-gap: #{$GAP};
              @include viewport(h, HD) {
                grid-row-gap: #{1.5 * $GAP};
              }
              @include viewport(w, SVGA) {
                grid-template-areas:
                  'image h2'
                  'image paragraph'
                  'image restart';
                padding-top: #{$standardGroupInnerblockPadding};
                padding-bottom: #{$standardGroupInnerblockPadding};
                grid-template-columns: 1fr 2fr;
                grid-template-rows: max-content 200px;
              }
              & > h2 {
                @include viewport(w, SVGA) {
                  align-self: end;
                  text-align: left;
                }
              }
              // & > .wp-block-group {
              //   grid-area: restart;
              //   padding: #{$GAP/ 2};
              //   background-color: #{getColor(bg-white)};
              //   & > .wp-block-group__inner-container {
              //     figure {
              //       margin: 0;
              //       & > img {
              //         display: block;
              //         margin: 0 auto;
              //         height: 50px;
              //         width: auto;
              //         @include viewport(h, HD) {
              //           height: 70px;
              //         }
              //       }
              //       figcaption {
              //         display: none;
              //       }
              //     }
              //     p {
              //       color: #{getColor(text-dark)};
              //       margin: 0;
              //     }
              //     grid-template-areas:
              //       'h2'
              //       'paragraph';
              //     grid-template-rows: min-content min-content;
              //   }
              // }
            }
            &:after {
              $width: 100vw;
              $height: calc(100vw / 4);
              @include svgArt(
                'city.svg',
                $width,
                $height,
                getComponentProperty(nav, mobileHeight_px),
                #{$standardGroupInnerblockPadding}
              );
            }
          }
          &:nth-child(4) {
            > .wp-block-group__inner-container {
              @include wpPosts(posts, row);
              grid-template-areas:
                'h2'
                'posts'
                'paragraph';
              grid-template-rows: #{typography(h2, lineHeight)} auto max-content;
              grid-row-gap: #{$GAP/2};
              @include viewport(h, HD) {
                grid-row-gap: #{$GAP};
              }
              @include viewport(w, SVGA) {
                $narrowScreenSpacing: 100px;
                grid-template-areas:
                  'h2 .    '
                  'h2 posts'
                  'paragraph  posts'
                  'paragraph  .    ';
                grid-template-rows: #{$narrowScreenSpacing} 1fr 1fr #{$narrowScreenSpacing};
                grid-template-columns: 1fr 1fr;
                justify-content: center;
              }
              h2 {
                @include viewport(w, SVGA) {
                  align-self: end;
                  text-align: left;
                }
              }
              & > .wp-block-latest-posts {
                margin-left: #{-$GAP} !important;
                width: 100vw;
                @include viewport(w, SVGA) {
                  width: 100%;
                  max-width: 100%;
                  min-width: 100%;
                  overflow: hidden;
                  margin: 0 !important;
                }
              }
            }
            &:after {
              $width: 100vw;
              $height: calc(100vw / 5);
              @include svgArt(
                'conversation.svg',
                $width,
                $height,
                getComponentProperty(nav, mobileHeight_px),
                130px
              );
            }
          }
          &:nth-child(5) {
            & > .wp-block-group__inner-container {
              @include wpPosts(success, column, getColor(bg-gray));
              grid-template-areas:
                'h2'
                'posts';
              grid-row-gap: #{$GAP/2};
              grid-template-rows: #{typography(h2, lineHeight)} 1fr;
              align-content: stretch;
              @include viewport(h, HD) {
                grid-row-gap: #{$GAP};
              }
              @include viewport(w, SVGA) {
                $logoNSocialY: getComponentProperty(logoNSocial, y_px);
                grid-template-rows: #{$logoNSocialY} 1fr #{$standardGroupInnerblockPadding};
              }
              h2 {
                align-self: center;
              }
              & > .wp-block-latest-posts {
                margin-left: #{-$GAP} !important;
                width: 100vw;
                @include viewport(w, SVGA) {
                  width: 100%;
                  max-width: 100%;
                  min-width: 100%;
                  overflow: hidden;
                  margin: 0 !important;
                }
              }
            }
            &:after {
              $cityWidth: 100vw;
              $height: calc(100vw / 4);
              @include svgArt(
                'success.svg',
                $cityWidth,
                $height,
                getComponentProperty(nav, mobileHeight_px),
                130px
              );
            }
          }
          &:nth-child(6) {
            & > .wp-block-group__inner-container {
              grid-template-rows: min-content min-content min-content;
              grid-template-areas:
                'h2'
                'feature'
                'paragraph';
              grid-row-gap: #{$GAP};

              @include viewport(h, HD) {
                grid-row-gap: #{$GAP};
              }
              @include viewport(w, SVGA) {
                $logoNSocialY: getComponentProperty(logoNSocial, y_px);
                grid-template-rows: #{$logoNSocialY} 1fr;
              }
              & > h2 {
                align-self: center;
              }
              & > p {
                display: none;
                margin: 0;
              }
            }
            & .wpcf7 {
              grid-area: feature;
              display: grid;
              grid-template-areas:
                '.'
                'wpcf7-form'
                'screen-reader-response';
              grid-template-rows: 1fr min-content 1fr;
              & .screen-reader-response {
                grid-area: screen-reader-response;
              }
              & .wpcf7-form {
                grid-area: wpcf7-form;
                & .ContactForm {
                  &-userInput {
                    display: grid;
                    grid-template-areas:
                      'contactform_left'
                      'contactform_right'
                      'contactform_submit';
                    @include viewport(w, SVGA) {
                      grid-template-areas:
                        'contactform_left contactform_right'
                        'contactform_submit contactform_submit';
                      grid-template-columns: 1fr 1fr;
                      grid-column-gap: #{2 * $GAP};
                      grid-row-gap: #{$GAP};
                    }
                    & br {
                      display: none;
                    }
                    &-submit {
                      grid-area: contactform_submit;
                      & .wpcf7-submit {
                        @include buttonText();
                        width: 100%;
                        padding: #{$GAP / 2};
                        border: none;
                        background-color: #{getColor(ui-yellow)};
                        color: #{getColor(text-dark)};
                        border-radius: #{$GAP/2};
                        &:hover {
                          background-color: #{getColor(ui-darkBlue)};
                          color: #{getColor(text-light)};
                          cursor: pointer;
                        }
                      }
                    }
                    &-left {
                      grid-area: contactform_left;
                    }
                    &-right {
                      grid-area: contactform_right;
                      & > p:nth-child(2) {
                        margin-bottom: 0;
                      }
                      & > p:nth-child(3) {
                        height: 100%;
                        margin-bottom: 0;
                        label {
                          height: 100%;
                        }
                      }
                    }
                    &-left,
                    &-right {
                      & label {
                        @include p();
                        color: #{getColor(text-dark)};
                        display: block;
                        margin-bottom: #{$GAP / 2};
                        input,
                        textarea {
                          margin-top: #{$GAP / 4};
                        }
                      }
                      & .wpcf7-text,
                      & .wpcf7-textarea {
                        box-sizing: border-box;
                        border: none;
                        background-color: #{getColor(bg-white)};
                        width: 100%;
                        padding: #{$GAP / 2};
                        font-family: #{#{font(text, font-family)}};
                        font-weight: #{#{font(text, font-weight)}};
                        border-radius: #{$GAP/2};
                        &:focus {
                          outline: none;
                          background-color: #{getColor(bg-yellow)};
                        }
                      }
                      & .wpcf7-textarea {
                        resize: none;
                        height: 150px;
                      }
                    }
                  }
                }
              }
            }
          }
          &:last-child {
            & > .wp-block-group__inner-container {
              padding-bottom: calc(#{$standardGroupInnerblockPadding} + 15vh);
              @include viewport(w, SVGA) {
                padding-bottom: #{$standardGroupInnerblockPadding};
              }
            }
          }
        }
      }
    }
  }
}
